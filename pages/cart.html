<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Volkhov:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="../style.css">
    <title>FASCO - Buy Now</title>
</head>
<body>
    <div class="shop-section">

        <header class="shop-section-header">
            <nav class="navlist">
                <div class="logo navitem">
                    <a href="../index.html">
                        FASCO
                    </a>
                </div>
                <ul class="navlinks navitem">
                    <a href="../index.html">
                        <li>Home</li>
                    </a>

                    <a href="../pages/shop.html">
                        <li>Shop</li>
                    </a>

                    <a href="#">
                        <li>Products</li>
                    </a>
                    <a href="#">
                        <li>Pages</li>
                    </a>
                </ul>
                <ul class="navicons navitem">
                    <li><img src="../images/Button ⏵ SVG.png" alt="icon"></li>
                    <li><img src="../images/SVG.png" alt="icon"></li>
                    <li><img src="../images/SVG (1).png" alt="icon"></li>
                    <li class="cart-icon"><img src="../images/SVG (2).png" alt="icon"></li>
                </ul>
                <div class="digit cart"></div>
            </nav>
        </header>
        <div class="title">Shopping Cart</div>
        <div class="location">
            <div>Home</div>
            <img src="../images/SVG (3).png" alt="right-arrow">
            <div>cart</div>
        </div>

        <div class="table-headers">
            <div class="header">Product</div>
            <div class="header">Price</div>
            <div class="header">Quantity</div>
            <div class="header">Total</div>
        </div>

        <div class="sep-line"></div>

        <div class="product-layers">
            <!-- <div class="product-layer">

                <div class="product">
                    <div class="img-container">
                        <img src="../images/div.swiper-container.png" alt="" class="img">
                    </div>
                    <div class="info">
                        <div class="prod-title">Mini dress with <br>ruffled straps</div>
                        <div class="color-title">Color: Red</div>
                        <div class="remove">Remove</div>
                    </div>
                </div>

                <div class="product-price">$14.90</div>

                <div class="quantity-container">
                    <div class="min">-</div>
                    <div class="nn">01</div>
                    <div class="pls">+</div>
                </div>


                <div class="total-price">$14.90</div>
            </div> -->
        </div>
        
        <div class="sep-line"></div>

        <div class="cart-section">

            <div class="checkbox-container">
                <input type="checkbox" name="checkbox" class="checkbox" value="yes">
                <p>For <span>$10.00</span> please wrap the product</p>
            </div>

            <div class="sepa"></div>

            <div class="subtotal-container">
                <div>Subtotal</div>
                <div class="subtotal-price">$100.00</div>
            </div>

            <button class="checkout-btn">Checkout</button>
            
            <div class="view-btn">
                    View Cart
            </div>
        </div>
    </div>

    <div class="ending-section">

        <div class="img-container">
            <img src="../images/image 2.png" alt="">
        </div>

        <div class="news-letter">
            <p class="title">Subscribe To Our Newsletter</p>
            <p class="description">
                Join our mailing list for exclusive deals, fashion updates, and style inspiration. Be the first to know about new arrivals and special offers
            </p>
            <input type="text" placeholder="micheal@ymail.com">
            <button class="btn">Subscribe Now</button>
        </div>

        <div class="img-container">
            <img src="../images/image 3.png" alt="">
        </div>
    </div>
    <div class="ending-sepa"></div>
    <aside>
        <p class="logo">FASCO</p>
        <ul class="links">
            <li class="link-item">Support Center</li>
            <li class="link-item">invoicing</li>
            <li class="link-item">Contract</li>
            <li class="link-item">Careers</li>
            <li class="link-item">Blogs</li>
            <li class="link-item">FAQs</li>
        </ul>
    </aside>
    <footer>
        <p>Copyright © 2025 nafis-bin . All Rights Reseved.</p>
    </footer>   

    <script>

        // selecting all elements required
        let subPrice = document.querySelector('.subtotal-price');
        let checkBox = document.querySelector('.checkbox');
        let checkoutBtn = document.querySelector('.checkout-btn');
        let digitEle = document.querySelector('.digit.cart');

        // pushing all products in cart
        let layers = document.querySelector('.product-layers');
        let cartProducts = JSON.parse(window.localStorage.getItem('cart')) || [];
        console.table(cartProducts)

        digitEle.innerHTML = cartProducts.length;

        if (cartProducts.length === 0) {
            digitEle.style.display = 'none';
        }


        let cartIcon = document.querySelector('.cart-icon');
        cartIcon.onclick = () => {
            window.location.href = '../pages/cart.html';
        }



        // calculating the total shit
        let sup = 0;

        cartProducts.forEach(c => {
            var layer = document.createElement('div');
            layer.classList.add('product-layer');

            var product = document.createElement('div');
            product.classList.add('product');

            var imgContainer = document.createElement('div');
            imgContainer.classList.add('img-container');

            var img = document.createElement('img');
            img.classList.add('img');
            img.src = c.url;


            var info = document.createElement('div');
            info.classList.add('info');

            var prodTitle = document.createElement('div');
            prodTitle.classList.add('prod-title');
            prodTitle.textContent = c.name;

            var colorTitle = document.createElement('div');
            colorTitle.classList.add('color-title');
            colorTitle.textContent = 'Red';

            var remove = document.createElement('div');
            remove.classList.add('remove');
            remove.textContent = 'Remove';

            var prodPrice = document.createElement('div');
            prodPrice.classList.add('product-price');
            prodPrice.textContent = `${c.price}`;

            
            var quantContainer = document.createElement('div');
            quantContainer.classList.add('quantity-container');

            var min = document.createElement('div');
            min.classList.add('min');
            min.textContent = '-';

            var nn = document.createElement('div');
            nn.classList.add('nn');
            nn.textContent = c.multi;

            var pls = document.createElement('div');
            pls.classList.add('pls');
            pls.textContent = '+';


            var totalPrice = document.createElement('div');
            totalPrice.classList.add('total-price');
            totalPrice.textContent = `${c.total}`;

            // summing up the prices
            sup += parseInt(c.total.substring(1, c.total.length));


            imgContainer.append(img);

            info.append(
                prodTitle,
                colorTitle,
                remove
            );

            product.append(
                imgContainer,
                info,
            );

            quantContainer.append(
                min,
                nn,
                pls,
            )

            layer.append(
                product,
                prodPrice,
                quantContainer,
                totalPrice,
            )

            layers.append(layer);

            // layers.append(
            //     layer,
            //     layer.append(
            //         product,
            //         product.append(
            //             imgContainer,
            //             info,
            //             imgContainer.append(img),
            //             info.append(
            //                 prodTitle,
            //                 colorTitle,
            //                 remove
            //             )
            //         ),
            //         prodPrice,
            //         quantContainer,
            //         quantContainer.append(
            //             min,
            //             nn,
            //             pls,
            //         ),
            //         totalPrice
                    
            //     )
            // )
        })


        checkoutBtn.onclick = () => {
            window.location.href = '../pages/checkout.html';
        }


        let checked = window.localStorage.getItem('checked');
        if (checked === 'yes') {
            checkBox.checked = true;
            sup += 10;
        } 

        subPrice.textContent = `$${sup}.00`;


        checkBox.addEventListener('change', () => {
            // console.log('clicking on checkbox')
            console.log(`checkbox val: ${checkBox.value}`)
            if (checkBox.checked) {
                window.localStorage.setItem('checked', 'yes')
                sup += 10;
                subPrice.textContent = `$${sup}.00`;
            } else {
                window.localStorage.setItem('checked', 'no')
                sup -= 10;
                subPrice.textContent = `$${sup}.00`;
            }
        })

        const removers = document.querySelectorAll('.remove');
        removers.forEach(r => {
            r.onclick = () => {
                // selecting parent layer
                var layers = r.closest('.product-layers');
                var layer = r.closest('.product-layer');

                var title = layer.querySelector('.prod-title').textContent;
                var prodPrice = layer.querySelector('.total-price').textContent;

                sup = sup - parseInt(prodPrice.substring(1, prodPrice.length));
                subPrice.textContent = `$${sup}.00`;

                layers.removeChild(layer);

                // updating cart
                cartProducts = cartProducts.filter(p => p.name !== title);
                digitEle.innerHTML = cartProducts.length;

                if (cartProducts.length === 0) {
                    digitEle.style.display = 'none';
                }
                window.localStorage.setItem('cart', JSON.stringify(cartProducts));
            }
        })

    </script>
</body>
</html>